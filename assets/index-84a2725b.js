import{b as G}from"./admin-5d330f3e.js";import{d as J,r as y,i as P,e as r,o as u,c as q,f as e,w as l,g as i,b as c,j as n,t as k,k as m,D as H,l as p,C as Q,y as X,I as Y,G as Z,A as z,F as ee,E as te,p as le,a as ae,_ as ne}from"./index-596b62d7.js";import{u as oe,d as ie}from"./data-7ebc980a.js";import"./index-c70bcbaa.js";const I=w=>(le("data-v-7d629d26"),w=w(),ae(),w),re={class:"submissionList-card"},de={class:"table"},se={class:"header"},ue={class:"search"},ce=["onClick"],_e=I(()=>c("span",null,"正在测评",-1)),me={class:"header"},pe=I(()=>c("div",{class:"title"},"测试信息",-1)),ge=J({__name:"index",setup(w){const{toClipboard:L}=oe();let C=y(),V=y(0),h=y(!1),g=y(""),x=y(""),o=P({page_no:1,page_size:20,who:"",num:"",lang:"",verdict:""});async function f(){const{data:a}=await G(o);C.value=a.list,V.value=a.total}function B(a){o.page_no=a,f()}function N(a){o.page_size=a,f()}const A=a=>{o.verdict=a.verdict,o.lang=a.lang,f()};function $(a){g.value="```"+a.lang+`
`+a.code,x.value=a.code,g.value+="\n```\n";let s=1,b=JSON.parse(a.check_log);for(let v of b)g.value+=`##### 测试点 ${s++}, 用时:${v.time_usage} ms, 内存用量:${v.mem_usage} KB 
 \`\`\`
 ${v.msg}
 \`\`\`
`;h.value=!0}async function j(){await L(x.value),te.success("复制成功")}function F(a){o.who?o.who="":o.who=a,f()}function T(a){if(a.columnIndex==2&&o.num)return{color:"#409eff"};if(a.columnIndex==1&&o.who)return{color:"#409eff"}}return f(),(a,s)=>{const b=r("el-breadcrumb-item"),v=r("el-breadcrumb"),E=r("el-input"),S=r("el-button"),d=r("el-link"),_=r("el-table-column"),U=r("router-link"),M=r("el-icon"),R=r("el-table"),D=r("el-pagination"),K=r("mavon-editor"),O=r("el-dialog");return u(),q(ee,null,[e(v,{separator:"/"},{default:l(()=>[e(b,{to:{path:"/admin"}},{default:l(()=>[i("主页")]),_:1}),e(b,null,{default:l(()=>[i("提交记录")]),_:1})]),_:1}),c("div",re,[c("div",de,[c("div",se,[c("div",ue,[e(E,{modelValue:n(o).num,"onUpdate:modelValue":s[0]||(s[0]=t=>n(o).num=t),placeholder:"输入题目编号",clearable:""},null,8,["modelValue"]),e(E,{modelValue:n(o).who,"onUpdate:modelValue":s[1]||(s[1]=t=>n(o).who=t),placeholder:"输入提交者",clearable:""},null,8,["modelValue"]),e(S,{type:"primary",onClick:f},{default:l(()=>[i("搜索")]),_:1})])]),e(R,{data:n(C),"header-cell-style":T,style:{width:"100%"},onFilterChange:A},{default:l(()=>[e(_,{label:"编号",width:"100",prop:"id",align:"center"},{default:l(t=>[e(d,{type:"primary",onClick:W=>$(t.row)},{default:l(()=>[i(k(t.row.id),1)]),_:2},1032,["onClick"])]),_:1}),e(_,{label:"提交者",width:"150",align:"center"},{default:l(t=>[e(d,null,{default:l(()=>[c("span",{onClick:W=>F(t.row.username)},k(t.row.username),9,ce)]),_:2},1024)]),_:1}),e(_,{label:"题目编号",prop:"prob_id",align:"center","min-width":"150"},{default:l(t=>[e(d,null,{default:l(()=>[e(U,{target:"_blank",to:`/submit?where=topic&judgeType=common&num=${t.row.prob_id}`},{default:l(()=>[i(k(t.row.prob_id),1)]),_:2},1032,["to"])]),_:2},1024)]),_:1}),e(_,{label:"状态","min-width":"100",prop:"verdict",align:"center","column-key":"verdict",filters:[{text:"Accepted",value:"6"},{text:"Wrong Answer",value:"7"},{text:"Time Limit Exceeded",value:"1"},{text:"Compile Error",value:"5"},{text:"正在测评",value:"0"},{text:"Memory Limit Exceeded",value:"2"},{text:"Runtime Error",value:"3"},{text:"未知错误",value:"4"}],"filter-multiple":!1},{default:l(t=>[t.row.verdict=="6"?(u(),m(d,{key:0,type:"success",underline:!1},{default:l(()=>[e(n(H),{style:{width:"1em",height:"1em","margin-right":"4px"}}),i(" Accepted ")]),_:1})):p("",!0),t.row.verdict=="7"?(u(),m(d,{key:1,type:"danger",underline:!1},{default:l(()=>[e(n(Q),{style:{width:"1em",height:"1em","margin-right":"4px"}}),i(" Wrong Answer ")]),_:1})):p("",!0),t.row.verdict=="1"?(u(),m(d,{key:2,type:"warning",underline:!1},{default:l(()=>[e(n(X),{style:{width:"1em",height:"1em","margin-right":"4px"}}),i(" Time Limit Exceeded ")]),_:1})):p("",!0),t.row.verdict=="5"?(u(),m(d,{key:3,type:"warning",underline:!1},{default:l(()=>[e(n(Y),{style:{width:"1em",height:"1em","margin-right":"4px"}}),i(" Compile Error ")]),_:1})):p("",!0),t.row.verdict=="0"?(u(),m(d,{key:4,type:"warning",underline:!1},{default:l(()=>[e(M,{class:"is-loading",style:{"margin-right":"4px"}},{default:l(()=>[e(n(Z))]),_:1}),_e]),_:1})):p("",!0),t.row.verdict=="2"?(u(),m(d,{key:5,type:"warning",underline:!1},{default:l(()=>[i("Memory Limit Exceeded")]),_:1})):p("",!0),t.row.verdict=="3"?(u(),m(d,{key:6,type:"warning",underline:!1},{default:l(()=>[i("Runtime Error ")]),_:1})):p("",!0),t.row.verdict=="4"?(u(),m(d,{key:7,type:"warning",underline:!1},{default:l(()=>[i("未知错误")]),_:1})):p("",!0)]),_:1}),e(_,{label:"时间(ms)",width:"150",prop:"cpu_time",align:"center"}),e(_,{label:"内存(KB)",width:"150",prop:"memory",align:"center"}),e(_,{label:"语言",width:"100",prop:"lang",align:"center","column-key":"lang",filters:n(ie).language,"filter-multiple":!1},null,8,["filters"]),e(_,{label:"提交时间",prop:"create_time",align:"center",width:"200"})]),_:1},8,["data"]),e(D,{layout:"total, sizes, prev, pager, next, jumper",total:parseInt(String(n(V))),"page-sizes":[10,20,30,40,50],"urrent-page":n(o).page_no,"page-size":n(o).page_size,onSizeChange:N,onCurrentChange:B},null,8,["total","urrent-page","page-size"])])]),e(O,{title:"代码",modelValue:n(h),"onUpdate:modelValue":s[3]||(s[3]=t=>z(h)?h.value=t:h=t)},{default:l(()=>[c("div",me,[pe,e(S,{size:"small","data-clipboard-text":n(x),onClick:j,class:"copy_css",id:"copy_text"},{default:l(()=>[i(" 复制代码 ")]),_:1},8,["data-clipboard-text"])]),c("div",null,[e(K,{class:"md",id:"md",modelValue:n(g),"onUpdate:modelValue":s[2]||(s[2]=t=>z(g)?g.value=t:g=t),subfield:!1,defaultOpen:"preview",toolbarsFlag:!1,editable:!1,scrollStyle:!0,ishljs:!0},null,8,["modelValue"])])]),_:1},8,["modelValue"])],64)}}});const we=ne(ge,[["__scopeId","data-v-7d629d26"]]);export{we as default};
