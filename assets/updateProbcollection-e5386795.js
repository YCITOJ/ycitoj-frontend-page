import{d as h,n as B,m as P,r as _,e as i,o as E,c as R,f as e,w as u,j as n,A as v,U as $,K as q,V as I,g as M,E as c}from"./index-596b62d7.js";import{a as N,u as j}from"./probcollection-91b61205.js";import{p as z}from"./topic-d11f504d.js";import{l as A}from"./vue-draggable-plus-7cd4cc81.js";import"./index-c70bcbaa.js";const K={class:"addProbcollection Box"},O=h({__name:"updateProbcollection",setup(T){const f=B(),V=P();let t=_({id:f.query.id,title:"",info:"",prob_set:""}),s=_(),l=_([]);async function y(){const{data:o}=await N({id:f.query.id});t.value.title=o.title,l.value=o.prob_set,t.value.info=o.info}y();async function g(){const o=await z({num:s.value});l.value.push({num:s.value,title:o.title})}function w(o){l.value.splice(o,1)}async function x(){if(l.value.length<=0)return c.error("请添加题目！");if(l.value.length>50)return c.error("添加题目不能多于50题！");t.value.prob_set=`${l.value[0].num}`;for(var o=1;o<l.value.length;o++)t.value.prob_set=`${t.value.prob_set}|${l.value[o].num}`;await j(t.value),V.go(-1),c.success("修改成功")}return(o,r)=>{const b=i("el-input"),d=i("el-form-item"),m=i("el-button"),p=i("el-table-column"),C=i("el-table"),k=i("mavon-editor"),U=i("el-form");return E(),R("div",K,[e(U,{model:n(t),"label-width":"80px"},{default:u(()=>[e(d,{label:"题单名称"},{default:u(()=>[e(b,{modelValue:n(t).title,"onUpdate:modelValue":r[0]||(r[0]=a=>n(t).title=a)},null,8,["modelValue"])]),_:1}),e(d,{label:"添加题目"},{default:u(()=>[e(b,{placeholder:"请输入题目编号",modelValue:n(s),"onUpdate:modelValue":r[1]||(r[1]=a=>v(s)?s.value=a:s=a),clearable:""},{append:u(()=>[e(m,{icon:n($),onClick:g},null,8,["icon"])]),_:1},8,["modelValue"]),e(n(A),{target:"tbody",modelValue:n(l),"onUpdate:modelValue":r[2]||(r[2]=a=>v(l)?l.value=a:l=a),animation:150,style:{width:"100%"}},{default:u(()=>[e(C,{data:n(l)},{default:u(()=>[e(p,{prop:"num",label:"题目编号"}),e(p,{prop:"title",label:"题目名称"}),e(p,{label:"操作",width:"180"},{default:u(a=>[e(m,{type:"danger",icon:n(q),size:"small",onClick:I(D=>w(a.$index),["stop"])},null,8,["icon","onClick"])]),_:1})]),_:1},8,["data"])]),_:1},8,["modelValue"])]),_:1}),e(d,{label:"题单说明"},{default:u(()=>[e(k,{modelValue:n(t).info,"onUpdate:modelValue":r[3]||(r[3]=a=>n(t).info=a)},null,8,["modelValue"])]),_:1}),e(d,null,{default:u(()=>[e(m,{type:"primary",onClick:x},{default:u(()=>[M("立即修改")]),_:1})]),_:1})]),_:1},8,["model"])])}}});export{O as default};
