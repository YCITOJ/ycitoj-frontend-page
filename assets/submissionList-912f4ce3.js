import{d as I,m as P,n as H,r as f,i as Q,e as c,q as X,o as i,c as L,b as m,f as t,w as l,j as n,s as Y,v as Z,k as d,g as u,t as C,D as ee,l as _,C as te,y as ae,I as le,G as ne,A as B,F as ie,E as se,p as oe,a as re,_ as $}from"./index-596b62d7.js";import{b as de}from"./topic-d11f504d.js";import{u as ue,d as ce}from"./data-7ebc980a.js";import"./index-c70bcbaa.js";const A=v=>(oe("data-v-7bdc8bc3"),v=v(),re(),v),_e={class:"submissionList-card"},me={class:"table"},pe={class:"header"},ge={class:"search"},fe={key:1},ve=A(()=>m("span",null,"正在测评",-1)),he={class:"header"},ye=A(()=>m("div",{class:"title"},"测试信息",-1)),be=I({__name:"submissionList",setup(v){const V=P(),E=H(),{toClipboard:D}=ue();let x=f(!1),S=f(),z=f(0),h=f(!1),p=f(""),k=f(""),s=Q({page_no:1,page_size:20,num:"",lang:"",verdict:""});async function y(){x.value=!0,s.num=E.query.num;const{data:a}=await de(s);S.value=a.list,z.value=a.total,x.value=!1}function N(a){s.page_no=a,y()}function R(a){s.page_size=a,y()}const j=a=>{s.verdict=a.verdict,s.lang=a.lang,y()};function F(a){p.value="```"+a.lang+`
`+a.code,k.value=a.code,p.value+="\n```\n";let o=1,w=JSON.parse(a.check_log);for(let b of w)p.value+=`##### 测试点 ${o++}, 用时:${b.time_usage} ms, 内存用量:${b.mem_usage} KB 
 \`\`\`
 ${b.msg}
 \`\`\`
`;h.value=!0}async function T(){await D(k.value),se.success("复制成功")}y();function q(a){if(a.lang=="mchoice")return;let o=V.resolve({name:"submit",query:{id:"",num:a.prob_id,judgeType:"common",where:"topic"}});window.open(o.href,"_blank")}return(a,o)=>{const w=c("el-button"),b=c("el-input"),r=c("el-link"),g=c("el-table-column"),M=c("el-icon"),U=c("el-table"),K=c("el-pagination"),O=c("mavon-editor"),W=c("el-dialog"),G=X("loading");return i(),L(ie,null,[m("div",_e,[m("div",me,[m("div",pe,[m("div",ge,[t(b,{modelValue:n(s).num,"onUpdate:modelValue":o[0]||(o[0]=e=>n(s).num=e),placeholder:"输入编号、名称",class:"input-with-select"},{append:l(()=>[t(w,{icon:n(Y),onClick:y},null,8,["icon"])]),_:1},8,["modelValue"])])]),Z((i(),d(U,{data:n(S),style:{width:"100%"},onFilterChange:j},{default:l(()=>[t(g,{label:"编号",width:"100",prop:"id",align:"center"},{default:l(e=>[t(r,{type:"primary",onClick:J=>F(e.row)},{default:l(()=>[u(C(e.row.id),1)]),_:2},1032,["onClick"])]),_:1}),t(g,{label:"题目编号",prop:"prob_id",align:"center","min-width":"150"},{default:l(e=>[e.row.lang!="mchoice"?(i(),d(r,{key:0,onClick:J=>q(e.row)},{default:l(()=>[u(C(e.row.prob_id),1)]),_:2},1032,["onClick"])):(i(),L("span",fe,C(e.row.prob_id),1))]),_:1}),t(g,{label:"状态",prop:"verdict",align:"center","column-key":"verdict",filters:[{text:"Accepted",value:"6"},{text:"Wrong Answer",value:"7"},{text:"Time Limit Exceeded",value:"1"},{text:"Compile Error",value:"5"},{text:"正在测评",value:"0"},{text:"Memory Limit Exceeded",value:"2"},{text:"Runtime Error",value:"3"},{text:"未知错误",value:"4"}],"filter-multiple":!1},{default:l(e=>[e.row.verdict=="6"?(i(),d(r,{key:0,type:"success",underline:!1},{default:l(()=>[t(n(ee),{style:{width:"1em",height:"1em","margin-right":"4px"}}),u(" Accepted ")]),_:1})):_("",!0),e.row.verdict=="7"?(i(),d(r,{key:1,type:"danger",underline:!1},{default:l(()=>[t(n(te),{style:{width:"1em",height:"1em","margin-right":"4px"}}),u(" Wrong Answer ")]),_:1})):_("",!0),e.row.verdict=="1"?(i(),d(r,{key:2,type:"warning",underline:!1},{default:l(()=>[t(n(ae),{style:{width:"1em",height:"1em","margin-right":"4px"}}),u(" Time Limit Exceeded ")]),_:1})):_("",!0),e.row.verdict=="5"?(i(),d(r,{key:3,type:"warning",underline:!1},{default:l(()=>[t(n(le),{style:{width:"1em",height:"1em","margin-right":"4px"}}),u(" Compile Error ")]),_:1})):_("",!0),e.row.verdict=="0"?(i(),d(r,{key:4,type:"warning",underline:!1},{default:l(()=>[t(M,{class:"is-loading",style:{"margin-right":"4px"}},{default:l(()=>[t(n(ne))]),_:1}),ve]),_:1})):_("",!0),e.row.verdict=="2"?(i(),d(r,{key:5,type:"warning",underline:!1},{default:l(()=>[u("Memory Limit Exceeded")]),_:1})):_("",!0),e.row.verdict=="3"?(i(),d(r,{key:6,type:"warning",underline:!1},{default:l(()=>[u("Runtime Error ")]),_:1})):_("",!0),e.row.verdict=="4"?(i(),d(r,{key:7,type:"warning",underline:!1},{default:l(()=>[u("未知错误")]),_:1})):_("",!0)]),_:1}),t(g,{label:"时间(ms)",width:"150",prop:"cpu_time",align:"center"}),t(g,{label:"内存(KB)",width:"150",prop:"memory",align:"center"}),t(g,{label:"语言",width:"100",prop:"lang",align:"center","column-key":"lang",filters:n(ce).language,"filter-multiple":!1},null,8,["filters"]),t(g,{label:"提交时间",prop:"create_time",align:"center",width:"200"})]),_:1},8,["data"])),[[G,n(x)]]),t(K,{layout:"total, sizes, prev, pager, next, jumper",total:parseInt(String(n(z))),"page-sizes":[10,20,30,40,50],"urrent-page":n(s).page_no,"page-size":n(s).page_size,onSizeChange:R,onCurrentChange:N},null,8,["total","urrent-page","page-size"])])]),t(W,{title:"代码",modelValue:n(h),"onUpdate:modelValue":o[2]||(o[2]=e=>B(h)?h.value=e:h=e)},{default:l(()=>[m("div",he,[ye,t(w,{size:"small","data-clipboard-text":n(k),onClick:T,class:"copy_css",id:"copy_text"},{default:l(()=>[u(" 复制代码 ")]),_:1},8,["data-clipboard-text"])]),m("div",null,[t(O,{class:"md",id:"md",modelValue:n(p),"onUpdate:modelValue":o[1]||(o[1]=e=>B(p)?p.value=e:p=e),subfield:!1,defaultOpen:"preview",toolbarsFlag:!1,editable:!1,scrollStyle:!0,ishljs:!0},null,8,["modelValue"])])]),_:1},8,["modelValue"])],64)}}});const we=$(be,[["__scopeId","data-v-7bdc8bc3"]]),xe={class:"submissionList-box Box"},ke=I({__name:"submissionList",setup(v){return(V,E)=>(i(),L("div",xe,[t(we)]))}});const Se=$(ke,[["__scopeId","data-v-c05a4ee6"]]);export{Se as default};
