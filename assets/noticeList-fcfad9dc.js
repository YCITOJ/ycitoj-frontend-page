import{g as L,d as A}from"./home-0ec88417.js";import{d as B,u as w,r as g,i as N,e as c,o as s,c as v,f as i,w as e,j as a,k as y,g as r,l as h,b as _,F as V,h as E,t as k,E as F,_ as I}from"./index-596b62d7.js";import"./index-c70bcbaa.js";const $={class:"noticeList-box Box"},D={class:"list"},j={class:"title"},M={class:"left"},O={class:"time"},P=B({__name:"noticeList",setup(T){const d=w(),l=g([]);let u=g(0),x=g(!0),p=N({page_no:1,page_size:20});async function b(){const{data:t}=await L(p);l.value=t.list,u.value=t.total,u.value>p.page_size&&(x.value=!1)}b();async function z(t){await A({id:t});let m=l.value.findIndex(o=>o.id===t);m!==-1&&l.value.splice(m,1),F.success("删除成功")}return(t,m)=>{const o=c("el-button"),f=c("router-link"),S=c("el-popconfirm"),C=c("el-pagination");return s(),v("div",$,[i(f,{class:"menuitem-a",to:"/addnotice"},{default:e(()=>[a(d).isSuperAdmin()?(s(),y(o,{key:0,type:"primary"},{default:e(()=>[r("创建公告")]),_:1})):h("",!0)]),_:1}),_("div",D,[(s(!0),v(V,null,E(l.value,n=>(s(),v("div",{class:"item",key:n.id},[_("div",j,[i(f,{to:`/noticeDetail?id=${n.id}`},{default:e(()=>[r(k(n.title),1)]),_:2},1032,["to"])]),_("div",M,[_("div",O,k(n.create_time),1),a(d).isSuperAdmin()?(s(),y(f,{key:0,class:"btn",to:`/updatenotice?id=${n.id}`},{default:e(()=>[i(o,{type:"primary",size:"small"},{default:e(()=>[r("修改")]),_:1})]),_:2},1032,["to"])):h("",!0),a(d).isSuperAdmin()?(s(),y(S,{key:1,title:"确定要删除该公告?",onConfirm:U=>z(n.id)},{reference:e(()=>[i(o,{type:"danger",size:"small"},{default:e(()=>[r("删除")]),_:1})]),_:2},1032,["onConfirm"])):h("",!0)])]))),128))]),i(C,{layout:"prev, pager, next","hide-on-single-page":a(x),"page-size":a(p).page_size,total:a(u)},null,8,["hide-on-single-page","page-size","total"])])}}});const J=I(P,[["__scopeId","data-v-c57b3e31"]]);export{J as default};
