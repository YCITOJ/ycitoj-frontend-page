import{d as B,n as I,m as $,r as c,e as r,o as R,c as E,f as e,w as d,j as t,a1 as N,b as y,A as b,U as S,K as j,V as q,g as z,E as k,p as A,a as F,_ as K}from"./index-596b62d7.js";import{n as P}from"./class-c50514a5.js";import{p as T}from"./topic-d11f504d.js";import{l as G}from"./vue-draggable-plus-7cd4cc81.js";import"./index-c70bcbaa.js";const J=p=>(A("data-v-644f4699"),p=p(),F(),p),L={class:"addhomework"},O=J(()=>y("span",{class:"text-large font-600 mr-3"}," 创建作业 ",-1)),Q=B({__name:"addHomework",setup(p){const Y=I(),V=$();let a=c({class_id:"",title:"",info:"",start:"",end:"",prob_list:""}),u=c(""),m=c(""),n=c([]);async function g(){if(n.value.length<=0)return k.error("请添加题目！");a.value.prob_list=`${n.value[0].id},${n.value[0].score}`;for(var s=1;s<n.value.length;s++)a.value.prob_list=`${a.value.prob_list}|${n.value[s].id},${n.value[s].score}`;a.value.class_id=Y.query.id,await P(a.value),k.success("创建作业成功！"),V.go(-1)}async function h(){if(m.value.length<=0)return this.$message.error("请输入分值！");const s=await T({num:u.value});let l={id:"",title:"",score:""};l.id=u.value,l.title=s.title,l.score=m.value,n.value.push(l)}function x(s){n.value.splice(s,1)}function M(){V.go(-1)}return(s,l)=>{const H=r("el-page-header"),f=r("el-input"),i=r("el-form-item"),v=r("el-button"),_=r("el-table-column"),D=r("el-table"),w=r("el-date-picker"),U=r("mavon-editor"),C=r("el-form");return R(),E("div",L,[e(H,{icon:t(N),onBack:M},{content:d(()=>[O]),_:1},8,["icon"]),e(C,{ref:"form",model:t(a),"label-width":"80px"},{default:d(()=>[e(i,{label:"作业名称"},{default:d(()=>[e(f,{modelValue:t(a).title,"onUpdate:modelValue":l[0]||(l[0]=o=>t(a).title=o)},null,8,["modelValue"])]),_:1}),e(i,{label:"添加题目"},{default:d(()=>[y("div",null,[e(f,{placeholder:"请输入题目编号",modelValue:t(u),"onUpdate:modelValue":l[1]||(l[1]=o=>b(u)?u.value=o:u=o),clearable:"",style:{width:"40%"}},null,8,["modelValue"]),e(f,{modelValue:t(m),"onUpdate:modelValue":l[2]||(l[2]=o=>b(m)?m.value=o:m=o),placeholder:"请输入分值",style:{width:"30%"}},null,8,["modelValue"]),e(v,{slot:"append",icon:t(S),onClick:h},null,8,["icon"])]),e(t(G),{target:"tbody",modelValue:t(n),"onUpdate:modelValue":l[3]||(l[3]=o=>b(n)?n.value=o:n=o),animation:150,style:{width:"100%"}},{default:d(()=>[e(D,{data:t(n)},{default:d(()=>[e(_,{prop:"id",label:"题目编号"}),e(_,{prop:"title",label:"题目名称"}),e(_,{prop:"score",label:"题目分值"}),e(_,{label:"操作",width:"180"},{default:d(o=>[e(v,{slot:"append",type:"danger",icon:t(j),size:"mini",onClick:q(W=>x(o.$index),["stop"])},null,8,["icon","onClick"])]),_:1})]),_:1},8,["data"])]),_:1},8,["modelValue"])]),_:1}),e(i,{label:"开始时间"},{default:d(()=>[e(w,{modelValue:t(a).start,"onUpdate:modelValue":l[4]||(l[4]=o=>t(a).start=o),style:{width:"300px"},type:"date",placeholder:"选择日期",format:"YYYY 年 MM 月 DD 日 H 点 m 分 s 秒","value-format":"YYYY-MM-DD HH:mm:ss"},null,8,["modelValue"])]),_:1}),e(i,{label:"结束时间"},{default:d(()=>[e(w,{modelValue:t(a).end,"onUpdate:modelValue":l[5]||(l[5]=o=>t(a).end=o),style:{width:"300px"},type:"date",placeholder:"选择日期",format:"YYYY 年 MM 月 DD 日 H 点 m 分 s 秒","value-format":"YYYY-MM-DD HH:mm:ss"},null,8,["modelValue"])]),_:1}),e(i,{label:"作业说明"},{default:d(()=>[e(U,{modelValue:t(a).info,"onUpdate:modelValue":l[6]||(l[6]=o=>t(a).info=o)},null,8,["modelValue"])]),_:1}),e(i,null,{default:d(()=>[e(v,{type:"primary",onClick:g},{default:d(()=>[z("立即创建")]),_:1})]),_:1})]),_:1},8,["model"])])}}});const te=K(Q,[["__scopeId","data-v-644f4699"]]);export{te as default};
