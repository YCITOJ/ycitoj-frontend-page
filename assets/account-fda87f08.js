import{d as B,m as E,u as P,r as V,e as _,o as g,c as b,f as s,w as o,b as a,t as S,j as t,A as r,g as m,F as R,E as q,p as h,a as j,_ as A}from"./index-596b62d7.js";import{e as M,f as z,u as G}from"./user-3b6bd59b.js";import"./index-c70bcbaa.js";const y=k=>(h("data-v-086d5406"),k=k(),j(),k),H={class:"list"},J={class:"item"},K={class:"left"},L=y(()=>a("span",{class:"title"},"QQ",-1)),O={class:"value"},W=y(()=>a("div",{class:"item"},[a("div",{class:"left"},[a("span",{class:"title"},"手机"),a("span",{class:"value"},"未绑定")])],-1)),X={class:"item"},Y={class:"left"},Z=y(()=>a("span",{class:"title"},"Codeforces",-1)),ee={class:"value"},le={class:"item"},se=y(()=>a("div",{class:"left"},[a("span",{class:"title"},"密码")],-1)),oe={class:"dialog-footer"},te={class:"dialog-footer"},ae={class:"dialog-footer"},ne=B({__name:"account",setup(k){const D=E(),u=P(),U=V("first");let n=V(!1),d=V(!1),p=V(!1),i=V({qq_number:u.configInfo.qq_number,cf_handle:u.configInfo.cf_handle,cf_password:u.configInfo.cf_password}),f=V({username:u.userInfo.username,password:"",new_password:"",check_new_password:""});async function x(){await M(i.value);const{data:$}=await z();u.setConfigInfo($),q.success("修改成功"),n.value=!1,d.value=!1}async function F(){if(f.value.new_password!==f.value.check_new_password){q.error("两次密码不一致");return}await G(f.value),q.success("修改密码成功"),p.value=!1,u.clearUserInfo(),D.push("/login")}return($,e)=>{const N=_("router-link"),Q=_("el-tab-pane"),T=_("el-tabs"),c=_("el-input"),v=_("el-form-item"),C=_("el-form"),w=_("el-button"),I=_("el-dialog");return g(),b(R,null,[s(T,{modelValue:U.value,"onUpdate:modelValue":e[4]||(e[4]=l=>U.value=l),class:"demo-tabs"},{default:o(()=>[s(Q,{label:"账户设置",name:"first",class:"first"},{default:o(()=>[a("div",H,[a("div",J,[a("div",K,[L,a("span",O,S(t(u).configInfo.qq_number),1)]),t(u).configInfo.qq_number?(g(),b("div",{key:0,class:"right",onClick:e[0]||(e[0]=l=>r(n)?n.value=!0:n=!0)},"换绑")):(g(),b("div",{key:1,class:"right",onClick:e[1]||(e[1]=l=>r(n)?n.value=!0:n=!0)},"绑定"))]),W,a("div",X,[a("div",Y,[Z,a("span",ee,S(t(u).configInfo.cf_handle),1)]),t(u).configInfo.cf_handle?(g(),b("div",{key:0,class:"right",onClick:e[2]||(e[2]=l=>r(d)?d.value=!0:d=!0)},"换绑")):(g(),b("div",{key:1,class:"right",onClick:e[3]||(e[3]=l=>r(d)?d.value=!0:d=!0)},"绑定"))]),a("div",le,[se,s(N,{class:"right",to:"/login?title=邮箱重置密码"},{default:o(()=>[m("修改")]),_:1})])])]),_:1})]),_:1},8,["modelValue"]),s(I,{modelValue:t(n),"onUpdate:modelValue":e[8]||(e[8]=l=>r(n)?n.value=l:n=l),title:"Tips",width:"30%"},{footer:o(()=>[a("span",oe,[s(w,{onClick:e[6]||(e[6]=l=>r(n)?n.value=!1:n=!1)},{default:o(()=>[m("取消")]),_:1}),s(w,{type:"primary",onClick:e[7]||(e[7]=l=>x())},{default:o(()=>[m(" 确定 ")]),_:1})])]),default:o(()=>[s(C,{model:t(i),"label-width":"40px"},{default:o(()=>[s(v,{label:"QQ"},{default:o(()=>[s(c,{modelValue:t(i).qq_number,"onUpdate:modelValue":e[5]||(e[5]=l=>t(i).qq_number=l)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),s(I,{modelValue:t(d),"onUpdate:modelValue":e[13]||(e[13]=l=>r(d)?d.value=l:d=l),title:"Tips",width:"30%"},{footer:o(()=>[a("span",te,[s(w,{onClick:e[11]||(e[11]=l=>r(d)?d.value=!1:d=!1)},{default:o(()=>[m("取消")]),_:1}),s(w,{type:"primary",onClick:e[12]||(e[12]=l=>x())},{default:o(()=>[m(" 确定 ")]),_:1})])]),default:o(()=>[s(C,{model:t(i),"label-width":"40px"},{default:o(()=>[s(v,{label:"账号"},{default:o(()=>[s(c,{modelValue:t(i).cf_handle,"onUpdate:modelValue":e[9]||(e[9]=l=>t(i).cf_handle=l)},null,8,["modelValue"])]),_:1}),s(v,{label:"密码"},{default:o(()=>[s(c,{modelValue:t(i).cf_password,"onUpdate:modelValue":e[10]||(e[10]=l=>t(i).cf_password=l),type:"password"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),s(I,{modelValue:t(p),"onUpdate:modelValue":e[19]||(e[19]=l=>r(p)?p.value=l:p=l),title:"Tips",width:"30%"},{footer:o(()=>[a("span",ae,[s(w,{onClick:e[17]||(e[17]=l=>r(p)?p.value=!1:p=!1)},{default:o(()=>[m("取消")]),_:1}),s(w,{type:"primary",onClick:e[18]||(e[18]=l=>F())},{default:o(()=>[m(" 确定 ")]),_:1})])]),default:o(()=>[s(C,{model:t(i),"label-width":"80px"},{default:o(()=>[s(v,{label:"原密码"},{default:o(()=>[s(c,{modelValue:t(f).password,"onUpdate:modelValue":e[14]||(e[14]=l=>t(f).password=l),type:"password"},null,8,["modelValue"])]),_:1}),s(v,{label:"新密码"},{default:o(()=>[s(c,{modelValue:t(f).new_password,"onUpdate:modelValue":e[15]||(e[15]=l=>t(f).new_password=l),type:"password"},null,8,["modelValue"])]),_:1}),s(v,{label:"确认密码"},{default:o(()=>[s(c,{modelValue:t(f).check_new_password,"onUpdate:modelValue":e[16]||(e[16]=l=>t(f).check_new_password=l),type:"password"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])],64)}}});const re=A(ne,[["__scopeId","data-v-086d5406"]]);export{re as default};
