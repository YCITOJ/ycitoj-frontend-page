import{d as k,m as P,r as _,e as r,o as U,c as h,f as e,w as a,j as o,A as b,U as B,K as E,V as N,g as j,E as c}from"./index-596b62d7.js";import{c as I}from"./probcollection-91b61205.js";import{p as M}from"./topic-d11f504d.js";import{l as R}from"./vue-draggable-plus-7cd4cc81.js";import"./index-c70bcbaa.js";const z={class:"addProbcollection Box"},G=k({__name:"addProbcollection",setup(A){const v=P();let n=_({title:"",info:"",prob_set:""}),i=_(),t=_([]);async function V(){const s=await M({num:i.value});t.value.push({num:i.value,title:s.title})}function w(s){t.value.splice(s,1)}async function x(){if(t.value.length<=0)return c.error("请添加题目！");if(t.value.length>50)return c.error("添加题目不能多于50题！");n.value.prob_set=t.value.map(s=>s.num).join("|"),await I(n.value.title,n.value.info,n.value.prob_set),v.go(-1),c.success("创建成功")}return(s,u)=>{const f=r("el-input"),d=r("el-form-item"),m=r("el-button"),p=r("el-table-column"),g=r("el-table"),y=r("mavon-editor"),C=r("el-form");return U(),h("div",z,[e(C,{model:o(n),"label-width":"80px"},{default:a(()=>[e(d,{label:"题单名称"},{default:a(()=>[e(f,{modelValue:o(n).title,"onUpdate:modelValue":u[0]||(u[0]=l=>o(n).title=l)},null,8,["modelValue"])]),_:1}),e(d,{label:"添加题目"},{default:a(()=>[e(f,{placeholder:"请输入题目编号",modelValue:o(i),"onUpdate:modelValue":u[1]||(u[1]=l=>b(i)?i.value=l:i=l),clearable:""},{append:a(()=>[e(m,{icon:o(B),onClick:V},null,8,["icon"])]),_:1},8,["modelValue"]),e(o(R),{target:"tbody",modelValue:o(t),"onUpdate:modelValue":u[2]||(u[2]=l=>b(t)?t.value=l:t=l),animation:150,style:{width:"100%"}},{default:a(()=>[e(g,{data:o(t)},{default:a(()=>[e(p,{prop:"num",label:"题目编号"}),e(p,{prop:"title",label:"题目名称"}),e(p,{label:"操作",width:"180"},{default:a(l=>[e(m,{type:"danger",icon:o(E),size:"small",onClick:N(K=>w(l.$index),["stop"])},null,8,["icon","onClick"])]),_:1})]),_:1},8,["data"])]),_:1},8,["modelValue"])]),_:1}),e(d,{label:"题单说明"},{default:a(()=>[e(y,{modelValue:o(n).info,"onUpdate:modelValue":u[3]||(u[3]=l=>o(n).info=l)},null,8,["modelValue"])]),_:1}),e(d,null,{default:a(()=>[e(m,{type:"primary",onClick:x},{default:a(()=>[j("立即创建")]),_:1})]),_:1})]),_:1},8,["model"])])}}});export{G as default};
