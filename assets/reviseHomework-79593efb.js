import{d as I,n as $,m as q,r as f,e as r,o as N,c as E,f as e,w as d,j as a,a1 as R,b as h,A as w,U as S,K as j,V as z,g as A,E as y,p as F,a as K,_ as L}from"./index-596b62d7.js";import{h as P,p as T}from"./class-c50514a5.js";import{p as G}from"./topic-d11f504d.js";import{l as J}from"./vue-draggable-plus-7cd4cc81.js";import"./index-c70bcbaa.js";const O=p=>(F("data-v-5b6fb0ac"),p=p(),K(),p),Q={class:"addhomework"},W=O(()=>h("span",{class:"text-large font-600 mr-3"}," 创建作业 ",-1)),X=I({__name:"reviseHomework",setup(p){const _=$(),V=q();let o=f({class_id:_.query.class_id,homework_id:Number(_.query.homework_id),title:"",info:"",start:"",end:"",prob_list:""}),u=f(""),i=f(""),s=f([]);async function g(){const{data:n}=await P({id:_.query.homework_id});o.value.title=n.title,o.value.start=n.start_time,o.value.end=n.end_time,o.value.info=n.information,s.value=n.prob_list}g();async function Y(){if(s.value.length<=0)return y.error("请添加题目！");o.value.prob_list=`${s.value[0].id},${s.value[0].score}`;for(var n=1;n<s.value.length;n++)o.value.prob_list=`${o.value.prob_list}|${s.value[n].id},${s.value[n].score}`;o.value.class_id=_.query.id,await T(o.value),y.success("修改作业成功！"),V.go(-1)}async function x(){if(i.value.length<=0)return this.$message.error("请输入分值！");const n=await G({num:u.value});let l={id:"",name:"",score:""};l.id=u.value,l.name=n.title,l.score=i.value,s.value.push(l)}function H(n){s.value.splice(n,1)}function M(){V.go(-1)}return(n,l)=>{const D=r("el-page-header"),v=r("el-input"),m=r("el-form-item"),b=r("el-button"),c=r("el-table-column"),U=r("el-table"),k=r("el-date-picker"),C=r("mavon-editor"),B=r("el-form");return N(),E("div",Q,[e(D,{icon:a(R),onBack:M},{content:d(()=>[W]),_:1},8,["icon"]),e(B,{ref:"form",model:a(o),"label-width":"80px"},{default:d(()=>[e(m,{label:"作业名称"},{default:d(()=>[e(v,{modelValue:a(o).title,"onUpdate:modelValue":l[0]||(l[0]=t=>a(o).title=t)},null,8,["modelValue"])]),_:1}),e(m,{label:"添加题目"},{default:d(()=>[h("div",null,[e(v,{placeholder:"请输入题目编号",modelValue:a(u),"onUpdate:modelValue":l[1]||(l[1]=t=>w(u)?u.value=t:u=t),clearable:"",style:{width:"40%"}},null,8,["modelValue"]),e(v,{modelValue:a(i),"onUpdate:modelValue":l[2]||(l[2]=t=>w(i)?i.value=t:i=t),placeholder:"请输入分值",style:{width:"30%"}},null,8,["modelValue"]),e(b,{slot:"append",icon:a(S),onClick:x},null,8,["icon"])]),e(a(J),{target:"tbody",modelValue:a(s),"onUpdate:modelValue":l[3]||(l[3]=t=>w(s)?s.value=t:s=t),animation:150,style:{width:"100%"}},{default:d(()=>[e(U,{data:a(s),style:{width:"80%"}},{default:d(()=>[e(c,{prop:"id",label:"题目编号"}),e(c,{prop:"name",label:"题目名称"}),e(c,{prop:"score",label:"题目分值"}),e(c,{label:"操作",width:"180"},{default:d(t=>[e(b,{slot:"append",type:"danger",icon:a(j),size:"mini",onClick:z(Z=>H(t.$index),["stop"])},null,8,["icon","onClick"])]),_:1})]),_:1},8,["data"])]),_:1},8,["modelValue"])]),_:1}),e(m,{label:"开始时间"},{default:d(()=>[e(k,{modelValue:a(o).start,"onUpdate:modelValue":l[4]||(l[4]=t=>a(o).start=t),style:{width:"300px"},type:"date",placeholder:"选择日期",format:"YYYY 年 MM 月 DD 日 H 点 m 分 s 秒","value-format":"YYYY-MM-DD HH:mm:ss"},null,8,["modelValue"])]),_:1}),e(m,{label:"结束时间"},{default:d(()=>[e(k,{modelValue:a(o).end,"onUpdate:modelValue":l[5]||(l[5]=t=>a(o).end=t),style:{width:"300px"},type:"date",placeholder:"选择日期",format:"YYYY 年 MM 月 DD 日 H 点 m 分 s 秒","value-format":"YYYY-MM-DD HH:mm:ss"},null,8,["modelValue"])]),_:1}),e(m,{label:"作业说明"},{default:d(()=>[e(C,{modelValue:a(o).info,"onUpdate:modelValue":l[6]||(l[6]=t=>a(o).info=t)},null,8,["modelValue"])]),_:1}),e(m,null,{default:d(()=>[e(b,{type:"primary",onClick:Y},{default:d(()=>[A("立即修改")]),_:1})]),_:1})]),_:1},8,["model"])])}}});const ne=L(X,[["__scopeId","data-v-5b6fb0ac"]]);export{ne as default};
