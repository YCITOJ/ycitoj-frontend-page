import{a as V,d as j}from"./discuss-26b3cf8a.js";import{d as L,u as A,r as h,e as i,o as s,c as n,b as e,f as a,w as d,j as o,s as H,af as S,g as T,F as C,h as D,k as m,l as x,K as U,t as r,ag as K,E as M,_ as z,ah as O,p as q,a as G}from"./index-596b62d7.js";import"./index-c70bcbaa.js";const J={class:"discuss-list"},P={class:"header"},Q={class:"search"},R={class:"list"},W={key:0,class:"btns"},X={class:"avatar"},Y={class:"left"},Z={class:"info"},ee={class:"name"},se={class:"time"},te={class:"rigth"},oe={class:"num"},ae={class:"item-header"},ne={key:0},ce={key:1},_e={key:2},ie={key:3},le={class:"introduce"},de=L({__name:"list",setup(v){const u=A();let p=h(),g=h(0),y=h(0),l=h({page_no:1,order:"",content:""});async function k(){const{data:_}=await V(l.value);p.value=_.list,g.value=_.total,y.value=_.size}async function $(_){l.value.page_no=_,await k(),window.scrollTo({top:0,behavior:"smooth"})}k();async function w(_){await j({topic_id:_}),p.value=p.value.filter(c=>c.id!==_),M.success("删除成功")}return(_,c)=>{const f=i("el-button"),B=i("el-input"),b=i("router-link"),F=i("el-popconfirm"),I=i("el-avatar"),N=i("el-card"),E=i("el-pagination");return s(),n(C,null,[e("div",J,[e("div",P,[e("div",Q,[a(B,{modelValue:o(l).content,"onUpdate:modelValue":c[0]||(c[0]=t=>o(l).content=t),placeholder:"输入编号、名称",class:"input-with-select"},{append:d(()=>[a(f,{icon:o(H),onClick:k},null,8,["icon"])]),_:1},8,["modelValue"])]),a(b,{to:"/addDiscuss"},{default:d(()=>[a(f,{class:"btn",icon:o(S),color:"#79bbff",round:""},{default:d(()=>[T("发起讨论")]),_:1},8,["icon"])]),_:1})]),e("div",R,[(s(!0),n(C,null,D(o(p),t=>(s(),m(N,{class:"item"},{default:d(()=>[o(u).isSuperAdmin()||t.uploader==o(u).userInfo.id?(s(),n("div",W,[a(b,{class:"menuitem-a",to:`/editDiscuss?id=${t.id}`},{default:d(()=>[o(u).isSuperAdmin()?(s(),m(o(S),{key:0,style:{width:"1em",height:"1em","margin-right":"8px"}})):x("",!0)]),_:2},1032,["to"]),a(F,{title:"确定要删除该比赛?",onConfirm:Ie=>w(t.id)},{reference:d(()=>[a(o(U),{style:{width:"1em",height:"1em","margin-right":"8px"}})]),_:2},1032,["onConfirm"])])):x("",!0),e("div",X,[e("div",Y,[t.user.avatar?(s(),m(I,{key:0,size:40,src:t.user.avatar,fit:"scale-down"},null,8,["src"])):(s(),m(I,{key:1,size:40,src:"https://cube.elemecdn.com/3/7c/3ea6beec64369c2642b92c6726f1epng.png",fit:"scale-down"})),e("div",Z,[e("div",ee,r(t.user.name),1),e("div",se,r(t.create_time),1)])]),e("div",te,[a(o(K),{style:{width:"1em",height:"1em","margin-right":"2px"}}),e("span",oe,r(t.user_click_count),1)])]),a(b,{to:`/discussHome?id=${t.id}`},{default:d(()=>[e("div",ae,[t.type==0?(s(),n("span",ne,"帖子")):t.type==1?(s(),n("span",ce,"题解")):t.type==2?(s(),n("span",_e,"竞赛讨论")):t.type==3?(s(),n("span",ie,"班级讨论")):x("",!0),e("span",null," | "+r(t.title),1)]),e("div",le,r(t.introduce),1)]),_:2},1032,["to"])]),_:2},1024))),256))])]),a(E,{layout:"total, prev, pager, next, jumper",total:parseInt(String(o(g))),"page-sizes":[10,20,30,40,50],"urrent-page":o(l).page_no,"page-size":o(y),onCurrentChange:$},null,8,["total","urrent-page","page-size"])],64)}}});const re=z(de,[["__scopeId","data-v-60525715"]]),ue=v=>(q("data-v-cdf0e731"),v=v(),G(),v),pe=ue(()=>e("div",{class:"title"},"必读榜",-1)),he={class:"item"},ve={class:"avatar"},fe={key:0},me={key:1},ge={key:2},ye={key:3},ke={class:"introduce"},xe=L({__name:"readList",setup(v){let u=h(),p=h(0),g=h({page_no:1,order:"hot",content:""});async function y(){const{data:l}=await V(g.value);u.value=l.list,p.value=l.total}return y(),(l,k)=>{const $=i("el-avatar"),w=i("router-link"),_=i("el-card");return s(),m(_,{class:"readList"},{default:d(()=>[pe,(s(!0),n(C,null,D(o(u),(c,f)=>(s(),n("div",he,[a(w,{to:`/discussHome?id=${c.id}`},{default:d(()=>[e("div",ve,[e("div",{class:O(["num",[0,1,2].indexOf(f)>=0?"numbg":""])},r(f+1),3),a($,{size:20,src:c.user.avatar,fit:"scale-down"},null,8,["src"]),c.type==0?(s(),n("span",fe,"帖子")):c.type==1?(s(),n("span",me,"题解")):c.type==2?(s(),n("span",ge,"竞赛讨论")):c.type==3?(s(),n("span",ye,"班级讨论")):x("",!0),e("span",null," | "+r(c.title),1)]),e("div",ke,r(c.introduce),1)]),_:2},1032,["to"])]))),256))]),_:1})}}});const $e=z(xe,[["__scopeId","data-v-cdf0e731"]]),we={class:"discuss Box"},be={class:"left"},Ce={class:"right"},Le={class:"readList"},ze=L({__name:"index",setup(v){return(u,p)=>(s(),n("div",we,[e("div",be,[a(re)]),e("div",Ce,[e("div",Le,[a($e)])])]))}});const Be=z(ze,[["__scopeId","data-v-3a82e044"]]);export{Be as default};
