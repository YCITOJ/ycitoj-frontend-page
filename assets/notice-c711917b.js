import{d as k,n as q,m as B,u as I,X as V,r as T,e as d,o as m,c as y,b as u,t as E,j as e,f as t,w as s,g as i,l as N,Q as g,E as x,a0 as $,_ as R}from"./index-596b62d7.js";import{a as j,q as M,b as U,d as A}from"./class-c50514a5.js";import"./index-c70bcbaa.js";const D={class:"notice"},F={class:"notice-header"},O={class:"btns",style:{display:"flex"}},Q={key:0},X=k({__name:"notice",setup(z){const a=q(),_=B(),f=I(),v=V();let n=T({teacher_id:0,class_name:"",intro:""});async function C(){const{data:r}=await j({class_id:a.query.id});n.value=r,v.setClassTeacherId(n.value.teacher_id)}C();async function b(){g.confirm("确定要退出该班级?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{await M({class_id:a.query.id}),_.push("/class"),x({type:"success",message:"退出成功！"})})}async function h(){const{data:r}=await U({class_id:a.query.id});$({title:"邀请码",message:r,duration:0})}async function w(){g.confirm("确定要删除该班级?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{await A({class_id:a.query.id}),_.push("/class"),x({type:"success",message:"删除成功！"})})}return(r,o)=>{const l=d("el-button"),p=d("router-link"),S=d("mavon-editor");return m(),y("div",D,[u("div",F,[u("span",null,E(e(n).class_name),1),u("div",O,[e(f).isSuperAdmin()||e(n).teacher_id==e(f).userInfo.id?(m(),y("div",Q,[t(l,{type:"success",onClick:h,style:{"margin-left":"10px"}},{default:s(()=>[i("生成邀请码")]),_:1}),t(p,{to:`/class/update?id=${e(a).query.id}`,style:{"margin-left":"10px"}},{default:s(()=>[t(l,{type:"primary"},{default:s(()=>[i("编辑班级")]),_:1})]),_:1},8,["to"]),t(p,{to:`/class/students?id=${e(a).query.id}`,style:{"margin-left":"10px"}},{default:s(()=>[t(l,{type:"info"},{default:s(()=>[i("学生列表")]),_:1})]),_:1},8,["to"]),t(l,{type:"danger",onClick:o[0]||(o[0]=c=>w()),style:{"margin-left":"10px"}},{default:s(()=>[i("删除班级")]),_:1})])):N("",!0),t(l,{type:"danger",onClick:o[1]||(o[1]=c=>b()),style:{"margin-left":"10px"}},{default:s(()=>[i("退出")]),_:1})])]),t(S,{modelValue:e(n).intro,"onUpdate:modelValue":o[2]||(o[2]=c=>e(n).intro=c),subfield:!1,defaultOpen:"preview",toolbarsFlag:!1,editable:!1,scrollStyle:!0,ishljs:!0,boxShadow:!1,previewBackground:"#ffffff",boxShadowStyle:"0 0 0 0",style:{padding:"0"}},null,8,["modelValue"])])}}});const K=R(X,[["__scopeId","data-v-e7882019"]]);export{K as default};
