import{d as E,m as H,u as N,r as d,e as u,o as n,c as l,b as e,F as T,h as j,k as y,w as i,j as o,f as a,J,K,l as k,t as C,L as R,g as p,M as U,E as G,_ as V,p as O,a as P}from"./index-596b62d7.js";import{g as Q,a as W,d as X}from"./contest-e2535aed.js";import"./index-c70bcbaa.js";const Y={class:"contest"},Z={class:"list"},ee={key:0,class:"btns"},te=["onClick"],se={class:"info"},oe={class:"left"},ne={class:"match-time left-item"},ae={class:"joins left-item"},ie={class:"right"},ce={class:"bottom"},_e=E({__name:"contest",setup(r){const h=H(),$=N();let c=d([]),m=d([]),B=d(0),x=d(1),I=d(0);async function D(){const t=await Q();B.value=t.count,I.value=t.show_per_page}async function w(){const{data:t}=await W({page_no:x.value});c.value=t,c.value.forEach(b=>{const f=new Date(b.start_time),S=new Date(b.end_time),_=Math.abs(S.getTime()-f.getTime()),g=Math.floor(_/(1e3*60*60)),v=Math.floor(_%(1e3*60*60)/(1e3*60));v==0?m.value.push({time:`${g}小时`}):m.value.push({time:`${g}小时${v}分钟`})})}function q(t){x.value=t,w()}function M(t){if(t.state==3){h.push({name:"contestHome",query:{id:t.id}});return}h.push({name:"registration",query:{id:t.id}})}async function A(t){await X({del_contest_id:t}),G.success("删除成功"),w()}return D(),w(),(t,b)=>{const f=u("router-link"),S=u("el-popconfirm"),_=u("el-button"),g=u("el-card"),v=u("el-pagination");return n(),l("div",Y,[e("div",Z,[(n(!0),l(T,null,j(o(c),(s,F)=>(n(),y(g,{class:"item",key:s.id},{default:i(()=>[o($).isSuperAdmin()?(n(),l("div",ee,[a(f,{to:`/contest/edit?id=${s.id}`},{default:i(()=>[a(o(J),{style:{width:"1em",height:"1em","margin-right":"8px"}})]),_:2},1032,["to"]),a(S,{title:"确定要删除该比赛?",onConfirm:L=>A(s.id)},{reference:i(()=>[a(o(K),{style:{width:"1em",height:"1em","margin-right":"8px"}})]),_:2},1032,["onConfirm"])])):k("",!0),e("h3",{class:"title",onClick:L=>M(s)},C(s.title),9,te),e("div",se,[e("div",oe,[e("div",ne,[a(o(R),{style:{width:"1em",height:"1em","margin-right":"4px"}}),p(" 比赛时间："+C(s.start_time)+" 至 "+C(s.end_time),1)]),e("div",ae,[a(o(U),{style:{width:"1em",height:"1em","margin-right":"4px"}}),p(" 比赛时长："+C(o(m)[F].time),1)])]),e("div",ie,[a(f,{to:`/registration?id=${s.id}`},{default:i(()=>[s.state==1?(n(),y(_,{key:0,type:"primary",round:""},{default:i(()=>[p(" 报名 ")]),_:1})):k("",!0)]),_:2},1032,["to"]),s.state==2?(n(),y(_,{key:0,type:"success",round:""},{default:i(()=>[p("进行中")]),_:1})):k("",!0),s.state==3?(n(),y(_,{key:1,type:"info",round:"",onClick:L=>M(s)},{default:i(()=>[p("查看比赛")]),_:2},1032,["onClick"])):k("",!0)])])]),_:2},1024))),128))]),e("div",ce,[a(v,{background:"",layout:"prev, pager, next","urrent-page":o(x),"page-size":o(I),total:o(B),onCurrentChange:q},null,8,["urrent-page","page-size","total"])])])}}});const le=V(_e,[["__scopeId","data-v-a60b2000"]]),z=r=>(O("data-v-36ac6160"),r=r(),P(),r),re={class:"top"},de={class:"Box"},ue={key:0,class:"title"},pe={key:1,class:"btns title"},he=z(()=>e("span",null,"创建比赛",-1)),me=[he],fe=z(()=>e("div",{class:"site"}," 胜者将获得丰厚大奖，还不快来参加，抢滩登陆，赢取属于你的荣耀！ ",-1)),ge={class:"main Box"},ve={class:"list"},ye=E({__name:"index",setup(r){const h=N();return($,c)=>(n(),l(T,null,[e("div",re,[e("div",de,[o(h).isSuperAdmin()?(n(),l("div",pe,[e("a",{onClick:c[0]||(c[0]=m=>$.$router.push("/contest/create"))},me)])):(n(),l("div",ue,"竞赛")),fe])]),e("div",ge,[e("div",ve,[a(le)])])],64))}});const xe=V(ye,[["__scopeId","data-v-36ac6160"]]);export{xe as default};
