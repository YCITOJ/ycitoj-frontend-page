import{d as R,m as ce,u as re,r as k,i as G,e as u,q as _e,o,c as i,b as r,f as e,w as a,j as t,s as ue,v as b,x as C,y as O,k as B,z as de,l as $,A as pe,F,h as j,B as fe,g,t as S,C as H,D as M,E as ge,p as W,a as J,_ as U,G as ve,H as me,I as he}from"./index-596b62d7.js";import{g as ye,a as be,b as ke}from"./topic-d11f504d.js";import"./index-c70bcbaa.js";const we=v=>(W("data-v-14ac5e93"),v=v(),J(),v),xe={class:"topic-card"},Ce={class:"header"},$e={class:"search"},Se={class:"choose"},Le={class:"tag"},ze={class:"tag-header"},Ie=we(()=>r("div",{class:"title"},[r("span",null,"搜索条件")],-1)),Ve={class:"tag-list"},Te={class:"item"},De={class:"list"},Be={class:"item"},Fe={class:"table"},je={key:0,style:{color:"#3b97ff"}},Ae={key:1,style:{color:"#32ca99"}},Ee={key:2,style:{color:"#ffaa20"}},Ne={key:3,style:{color:"#f56c6c"}},Oe={key:4,style:{color:"red"}},Re=R({__name:"topic",setup(v){const w=ce(),T=re();let L=k(!1),y=k(""),A=k(),z=k(0),p=k(!1),d=k(),_=k([]),f=G({page_no:1,page_size:20,search:"",problem:{difficulty:""},tagList:[]});async function m(){L.value=!0;const{data:n}=await ye(f);A.value=n.list,z.value=n.total,L.value=!1}async function K(){const{data:n}=await be();let s=n;s.sort(function(h,x){return h.color>x.color?1:h.color<x.color?-1:0});const c=s.reduce((h,x)=>{const I=x.color;return h[I]||(h[I]=[]),h[I].push(x),h},{});d.value=Object.values(c)}function Q(n){f.page_no=n,m()}function X(n){f.page_size=n,m()}function Y(n){let s=w.resolve({name:"submit",query:{id:n.id,num:n.num,judgeType:n.judge_type,where:"topic"}});window.open(s.href,"_blank")}function Z(){f.search=y.value,m()}const ee=n=>{f.problem.difficulty=n.difficulty,m()};function E(n){n?p.value=!0:(p.value=!1,_.value=[],f.tagList=[],m())}function te(n){if(_.value.indexOf(n)===-1){_.value.push(n);let s=[];for(let c=0;c<_.value.length;c++)s.push(_.value[c].id);f.tagList=s,m()}else ge.warning("标签已存在")}function le(n){_.value.splice(_.value.indexOf(n),1);let s=[];for(let c=0;c<_.value.length;c++)s.push(_.value[c].id);f.tagList=s,m()}return m(),K(),(n,s)=>{const c=u("el-button"),h=u("el-input"),x=u("el-badge"),I=u("router-link"),N=u("el-option"),oe=u("el-select"),q=u("el-icon"),se=u("el-collapse-transition"),V=u("el-table-column"),P=u("el-link"),ae=u("el-table"),ne=u("el-pagination"),ie=_e("loading");return o(),i("div",xe,[r("div",Ce,[r("div",$e,[e(h,{modelValue:t(f).search,"onUpdate:modelValue":s[0]||(s[0]=l=>t(f).search=l),placeholder:"输入编号、名称",class:"input-with-select"},{append:a(()=>[e(c,{icon:t(ue),onClick:m},null,8,["icon"])]),_:1},8,["modelValue"]),b(e(x,{onClick:s[1]||(s[1]=l=>E(!1)),value:t(_).length,class:"item",type:"primary"},{default:a(()=>[e(c,{class:"tag-btn",style:{"background-color":"#c6e2ff",color:"#409eff"},icon:t(O),circle:""},null,8,["icon"])]),_:1},8,["value"]),[[C,t(p)&&t(_).length>0]]),b(e(c,{onClick:s[2]||(s[2]=l=>E(!1)),class:"tag-btn",style:{"background-color":"#c6e2ff",color:"#409eff"},icon:t(O),circle:""},null,8,["icon"]),[[C,t(p)&&t(_).length==0]]),b(e(c,{onClick:s[3]||(s[3]=l=>E(!0)),class:"tag-btn",icon:t(O),circle:""},null,8,["icon"]),[[C,!t(p)]]),t(T).isSuperAdmin()?(o(),B(I,{key:0,to:"/addproblem",style:{"margin-left":"10px"}},{default:a(()=>[e(c,{icon:t(de),circle:""},null,8,["icon"])]),_:1})):$("",!0)]),r("div",Se,[e(oe,{modelValue:t(y),"onUpdate:modelValue":s[4]||(s[4]=l=>pe(y)?y.value=l:y=l),placeholder:"全部",onChange:s[5]||(s[5]=l=>Z())},{default:a(()=>[e(N,{label:"全部",value:""}),e(N,{label:"主题目",value:"p"}),e(N,{label:"Codeforces",value:"CF"})]),_:1},8,["modelValue"])])]),e(se,null,{default:a(()=>[b(r("div",Le,[b(r("div",ze,[Ie,r("div",Ve,[(o(!0),i(F,null,j(t(_),l=>(o(),i("div",Te,[e(c,{size:"small",style:fe([{"margin-right":"10px"},{"background-color":l.color}]),color:l.color,class:"tag_button"},{default:a(()=>[g(S(l.name)+" ",1),e(q,{class:"el-icon--right",onClick:D=>le(l)},{default:a(()=>[e(t(H))]),_:2},1032,["onClick"])]),_:2},1032,["color","style"])]))),256))])],512),[[C,t(_).length>0]]),r("div",De,[(o(!0),i(F,null,j(t(d),l=>(o(),i("div",Be,[(o(!0),i(F,null,j(l,D=>(o(),B(c,{size:"small",style:{"margin-left":"0","margin-right":"10px","margin-bottom":"10px"},color:D.color,class:"tag_button",onClick:it=>te(D)},{default:a(()=>[g(S(D.name),1)]),_:2},1032,["color","onClick"]))),256))]))),256))])],512),[[C,t(p)]])]),_:1}),b((o(),i("div",Fe,[e(ae,{data:t(A),style:{width:"100%"},onRowClick:Y,onFilterChange:ee},{default:a(()=>[e(V,{label:"状态",width:"60"},{default:a(l=>[l.row.ac?(o(),B(q,{key:0,size:20},{default:a(()=>[e(t(M))]),_:1})):$("",!0)]),_:1}),e(V,{prop:"num",label:"编号",width:"100"}),e(V,{prop:"title",label:"题目"},{default:a(l=>[b(e(P,null,{default:a(()=>[g(S(l.row.title),1)]),_:2},1536),[[C,l.row.is_public==1]]),b(e(P,{type:"danger"},{default:a(()=>[g(S(l.row.title),1)]),_:2},1536),[[C,l.row.is_public!==1]])]),_:1}),e(V,{label:"难度",width:"80","column-key":"difficulty",filters:[{text:"入门",value:"1"},{text:"简单",value:"2"},{text:"中等",value:"3"},{text:"较难",value:"4"},{text:"困难",value:"5"}]},{default:a(l=>[l.row.difficulty=="1"?(o(),i("span",je,"入门")):$("",!0),l.row.difficulty=="2"?(o(),i("span",Ae,"简单")):$("",!0),l.row.difficulty=="3"?(o(),i("span",Ee,"中等")):$("",!0),l.row.difficulty=="4"?(o(),i("span",Ne,"较难")):$("",!0),l.row.difficulty=="5"?(o(),i("span",Oe,"困难")):$("",!0)]),_:1}),e(V,{label:"通过率",width:"100",align:"center"},{default:a(l=>[g(S((l.row.ac_cnt/l.row.subm_cnt*100||0).toFixed(0))+"% ",1)]),_:1})]),_:1},8,["data"]),e(ne,{layout:"total, sizes, prev, pager, next, jumper",total:parseInt(String(t(z))),"page-sizes":[10,20,30,40,50],"urrent-page":t(f).page_no,"page-size":t(f).page_size,onSizeChange:X,onCurrentChange:Q},null,8,["total","urrent-page","page-size"])])),[[ie,t(L)]])])}}});const Ue=U(Re,[["__scopeId","data-v-14ac5e93"]]),qe=v=>(W("data-v-f4c749cb"),v=v(),J(),v),Pe={class:"hot-card"},Ge={class:"header"},He=qe(()=>r("div",{class:"title"},"提交记录",-1)),Me={class:"more"},We={class:"list"},Je={key:0,style:{color:"#409eff"}},Ke={key:1,style:{color:"#67c23a"}},Qe={key:2,style:{color:"#e6a23c"}},Xe={key:3,style:{color:"#e6a23c"}},Ye={key:4},Ze={key:5,class:"num"},et=R({__name:"userSubmit",setup(v){let w=k(),T=G({page_no:1,page_size:6,num:"",lang:"",verdict:""});async function L(){const{data:y}=await ke(T);w.value=y.list,w.value[0]&&w.value[0].verdict=="0"&&setTimeout(()=>L(),5e3)}return L(),(y,A)=>{const z=u("router-link"),p=u("el-icon");return o(),i("div",Pe,[r("div",Ge,[He,r("div",Me,[e(z,{to:"/submissionList"},{default:a(()=>[g("查看跟多>>")]),_:1})])]),r("div",We,[(o(!0),i(F,null,j(t(w),d=>(o(),i("div",{class:"item",key:d.id},[d.verdict=="0"?(o(),i("span",Je,[e(p,{class:"is-loading"},{default:a(()=>[e(t(ve))]),_:1}),g("测评中")])):d.verdict=="6"?(o(),i("span",Ke,[e(p,null,{default:a(()=>[e(t(M))]),_:1}),g("Accepted")])):d.verdict=="1"?(o(),i("span",Qe,[e(p,null,{default:a(()=>[e(t(me))]),_:1}),g("Time Limit Exceeded")])):d.verdict=="5"?(o(),i("span",Xe,[e(p,null,{default:a(()=>[e(t(he))]),_:1}),g("Compile Error")])):(o(),i("span",Ye,[e(p,{style:{color:"red"}},{default:a(()=>[e(t(H))]),_:1}),g("Wrong Answer")])),d.lang=="mchoice"?(o(),i("div",Ze,S(d.prob_id),1)):(o(),B(z,{key:6,to:`/submit?num=${d.prob_id}&judgeType=${d.lang}&where=topic`,class:"num"},{default:a(()=>[g(S(d.prob_id),1)]),_:2},1032,["to"]))]))),128))])])}}});const tt=U(et,[["__scopeId","data-v-f4c749cb"]]),lt={class:"content Box"},ot={class:"left"},st={class:"right"},at={class:"userSubmit"},nt=R({__name:"index",setup(v){return(w,T)=>(o(),i("div",lt,[r("div",ot,[e(Ue)]),r("div",st,[r("div",at,[e(tt)])])]))}});const ut=U(nt,[["__scopeId","data-v-66310fdf"]]);export{ut as default};
